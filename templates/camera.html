<!-- Include the Instascan library -->
<script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>

<!-- Create a video element to display the camera feed -->
<video id="qr-video"></video>

<script>
// Get a reference to the video element and Instascan library
const video = document.getElementById('qr-video');
const scanner = new Instascan.Scanner({ video });

// When a QR code is detected, send the WebSocket message
scanner.addListener('scan', result => {
  const data = { 'message': result };
  alert('here we goo')
});

// Start the scanner when the video feed is ready
Instascan.Camera.getCameras().then(cameras => {
  if (cameras.length > 0) {
    scanner.start(cameras[0]);
  } else {
    console.error('No cameras found.');
  }
}).catch(error => {
  console.error(error);
});
</script>
