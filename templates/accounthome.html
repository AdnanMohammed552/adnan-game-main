<meta name="viewport" content="width=device-width, initial-scale=1">

{% extends 'base.html' %}
<meta name="viewport" content="width=device-width, initial-scale=1">

{% block title %}
<title>Room</title>
{% endblock %}

{% block content %}
<div class="container">
<style>
    .btn-primary:hover {
        background-color: green
    }
</style>
<section>
    <div class="d-grid gap-2">
        
        <a class="nav-link text-center display-6">Hello, {{request.user.username}}</a>
        <button class="btn btn-primary" type="submit" id="Create" style="background-color: green;"><h1 class="display-6" style="background-color: green;">Created games</h1>  </button>
        <button class="btn btn-primary" type="submit" id="Join" style="background-color: green;"><h1 class="display-6" style="background-color: green;">Played games</h1> </button>
        

    </div>
 
  <h4 id="error"></h4>
</section>
</div>


<script>
    document.querySelector('#Join').onclick = function(e){

      
        sessionStorage.setItem("pageState", "redirected");

// Redirect to the new URL using window.location
window.location.href = window.location.origin +'/account/played'

// Add an event listener for the "pageshow" event, which is triggered when the user navigates back to the page
window.addEventListener("pageshow", function(event) {
  // Check if the page state is set to "redirected"
  if (sessionStorage.getItem("pageState") === "redirected") {
    // Reload the page to update its content
    window.location.reload();
    // Reset the page state to avoid an infinite loop
    sessionStorage.setItem("pageState", "reloaded");
  }
});  

    };

    document.getElementById('Create').onclick = function(e) {
        sessionStorage.setItem("pageState", "redirected");

        // Redirect to the new URL using window.location
        window.location.href =window.location.origin +'/account/game';
        
        // Add an event listener for the "pageshow" event, which is triggered when the user navigates back to the page
        window.addEventListener("pageshow", function(event) {
          // Check if the page state is set to "redirected"
          if (sessionStorage.getItem("pageState") === "redirected") {
            // Reload the page to update its content
            window.location.reload();
            // Reset the page state to avoid an infinite loop
            sessionStorage.setItem("pageState", "reloaded");
          }
        });
    }



</script>
{% endblock %}