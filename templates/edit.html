{% extends 'base.html' %}

{% block content %}
<body dir="ltr" id="body">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<div class="container" id="quiz">
    <div class="form-group">
      <label for="quiz-name">Quiz Name:</label>
      <input type="text" class="form-control" id="name" name="quiz-name">
    </div>
    <div class="form-group">
      <label for="quiz-code">Quiz Code:</label>
      <input type="text" class="form-control" id="code" name="quiz-code">
    </div>
    

</div>

<script>
    const data = '{{data}}'
        z = data.replaceAll("&#x27;",'').replaceAll("[","").replaceAll("]","")
        let arr = z.split(",");
        let quotedArr = arr.map(item => `"${item}"`);
        let quotedStr = quotedArr.join(",");
        console.log('here ',quotedStr);
        d = "["+quotedStr+"]"
        let arrw = JSON.parse(d);
        console.log(arrw)
    
    
        let question=[]
        
            len = arrw.length
            questionnumber = (len-1)/7
            console.log('question num is',questionnumber)
            for (let i=1; i<= questionnumber ;i++){
                questionlocation = (7 * i) -6
                console.log('here rrr',arrw[questionlocation-1]) 
                question.push({question:arrw[questionlocation-1],answer:arrw.slice(questionlocation,questionlocation+4),correctans:arrw[questionlocation+4],timer:arrw[questionlocation+5]})
    
    
            }

            let questionCount = 1
            for(i of question){
                
                const question = document.createElement("div");
                question.classList.add("question");
                question.id='qu'

                question.innerHTML = `
                <div class="form-group">
                    <label id="qqq${questionCount}" for="question-${questionCount}">Question ${questionCount}:</label>
                    <div class="input-group">
                    <input type="text" class="form-control" id="question${questionCount}" name="question" value='${i.question}'>
                    <div class="input-group-append">
                        <span style="cursor: pointer;" id="span${questionCount}" class="input-group-text" onclick="deleteQuestion(${questionCount})">
                        <i style="color:red;" class="fas fa-trash"></i>
                        </span>
                    </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="quiz-timer">Timer Duration (in seconds):</label>
                    <input type="number" class="form-control" id="seconds-input${questionCount}" name="quiz-timer" value="120">
                </div>

                
                `;
                document.getElementById("quiz").appendChild(question);


                for (x of i.answer){
                    console.log(typeof (i.answer).indexOf(x))
                    o=i.answer.indexOf(x)+1
                    console.log('cos',(i.answer).indexOf(x) , i.correctans)
                    document.getElementById('qu').innerHTML += `
                    <div class="form-group">
                        <label id="for1${questionCount}" for="option-${questionCount}-1"></label>
                        <div class="input-group">
                        <div class="form-check">
                            <input type="radio" class="form-check-input" name="correct${questionCount}" id="correct${questionCount}-1" value="1">
                            <label class="form-check-label" for="option-${questionCount}-1"></label>
                        </div>
                        <input type="text" class="form-control" id="answer1${questionCount}" name="optionanswerquestionCount}" value='${x}'>
                        </div>
                    </div>
    
                    
                    `
                    questionCount ++


                    
                }
          
            }

</script>

{% endblock %}