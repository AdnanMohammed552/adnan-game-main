<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<div class="container">
  <h1>Quiz Creation Template with Bootstrap</h1>
  <form id="quiz-form">
    <div class="form-group">
      <label for="quiz-name">Quiz Name:</label>
      <input type="text" class="form-control" id="name" name="quiz-name">
    </div>
    <div class="form-group">
      <label for="quiz-code">Quiz Code:</label>
      <input type="text" class="form-control" id="code" name="quiz-code">
    </div>
    <div id="questions-container">
      <div class="question">
        <div class="form-group">
          <label for="question-1">Question 1:</label>
          <input type="text" class="form-control" id="question2" name="question1">
        </div>


        <div class="form-group">
          <label for="quiz-timer">Timer Duration (in seconds):</label>
          <input type="number" class="form-control" id="seconds-input1" name="quiz-timer" value="120">
        </div>
        
        <div class="form-group">
          <label for="option-1-1">Option 1:</label>
          <div class="form-check">
            <input type="radio" class="form-check-input" name="correct" id="correct" value="1">
            <label class="form-check-label" for="option-1-1">Option 1</label>
          </div>
          <input type="text" class="form-control" id="answer12" name="answer1">
        </div>
        <div class="form-group">
          <label for="option-1-2">Option 2:</label>
          <div class="form-check">
            <input type="radio" class="form-check-input" name="correct" id="correct" value="2">
            <label class="form-check-label" for="option-1-2">Option 2</label>
          </div>
          <input type="text" class="form-control" id="answer22" name="answer1">
        </div>
        <div class="form-group">
          <label for="option-1-3">Option 3:</label>
          <div class="form-check">
            <input type="radio" class="form-check-input" name="correct" id="correct" value="3">
            <label class="form-check-label" for="option-1-3">Option 3</label>
          </div>
          <input type="text" class="form-control" id="answer32" name="answer1">
        </div>
        <div class="form-group">
          <label for="option-1-4">Option 4:</label>
          <div class="form-check">
            <input type="radio" class="form-check-input" name="correct" id="correct" value="4">

            <label class="form-check-label" for="option-1-4">Option 4</label>
            </div>
            <input type="text" class="form-control" id="answer42" name="answer1">
            </div>
            </div>
            </div>
            <button id="add" type="button" class="btn btn-primary">Add Another Question</button>
            <button type="button" id="sub" class="btn btn-success">Create Quiz</button>
            </form>

<script>
let questionCount = 2;

  document.getElementById('add').onclick = function(e){
    questionCount++

      document.getElementById('quiz').innerHTML += (
        `
        <div class="question">
          <div class="form-group">
            <label for="question-${questionCount}">Question ${questionCount}:</label>
            <input type="text" class="form-control" id="question${questionCount}" name="question${questionCount}">
          </div>
          
          <div class="form-group">
            <label for="quiz-timer">Timer Duration (in seconds):</label>
            <input type="number" class="form-control" id="seconds-input${questionCount}"  name="quiz-timer" value="120">
          </div>
          
          <div class="form-group">
            <label for="option-${questionCount}-1">Option 1:</label>
            <div class="form-check">
              <input type="radio" class="form-check-input" name="correct${questionCount}" id="correct${questionCount}" value="1">
              <label class="form-check-label" for="option-${questionCount}-1">Option 1</label>
            </div>
            <input type="text" class="form-control" id="answer${questionCount}" name="optionanswerquestionCount}">
          </div>
          <div class="form-group">
            <label for="option-${questionCount}-2">Option 2:</label>
            <div class="form-check">
              <input type="radio" class="form-check-input" name="correct${questionCount}" id="correct${questionCount}" value="2">
              <label class="form-check-label" for="option-${questionCount}-2">Option 2</label>
            </div>
            <input type="text" class="form-control" id="answer${questionCount}" name="optionanswerquestionCount}">
          </div>
          <div class="form-group">
            <label for="option-${questionCount}-3">Option 3:</label>
            <div class="form-check">
            <input type="radio" class="form-check-input" name="correct${questionCount}" id="="correct${questionCount}" value="3">
            <label class="form-check-label" for="option-${questionCount}-3">Option 3</label>
            </div>
            <input type="text" class="form-control" id="answer${questionCount}" name="answer${questionCount}">
            </div>
            <div class="form-group">
            <label for="option-${questionCount}-4">Option 4:</label>
            <div class="form-check">
            <input type="radio" class="form-check-input" name="correct${questionCount}" id="="correct${questionCount}" value="4">
            <label class="form-check-label" for="option-${questionCount}-4">Option 4</label>
            </div>
            <input type="text" class="form-control" id="answer${questionCount}" name="answer${questionCount}">
            </div>
            </div>
            `
            )
      console.log(questionCount)
      document.getElementById('sub').onclick=function(e){
        console.log('tt')
        let data = []
          for (let i = 0; i <= questionCount; i++){
            try{
              console.log('this is ',i)
          const question= document.getElementById('question'+i).value

          const answer1= document.getElementById('answer1'+i).value
          const answer2= document.getElementById('answer2'+i).value
          const answer3= document.getElementById('answer3'+i).value
          const answer4= document.getElementById('answer4'+i).value
          const time= document.getElementById('seconds-input'+i).value
          console.log(question,answer1,answer2,answer3,answer4,time)

          const corr = document.querySelector('input[name="correct'+i+'"]:checked').value
          data.push(question,answer1,answer2,answer3,answer4,corr,time)


        }
        catch(err){
          console.log(err)
          continue

        }
          }

        const code = document.getElementById('code').value
        const name = document.getElementById('name').value
        data.push(code)
        data.push(name)
        fetch('/api/endpoint/', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)})
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error(error));
          console.log('data is ',data)


      }


      

  }


</script>